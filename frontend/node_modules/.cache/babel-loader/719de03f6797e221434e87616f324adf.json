{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/sample/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/sample/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/DELL/Desktop/sample/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/DELL/Desktop/sample/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/DELL/Desktop/sample/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useDispatch,useSelector}from'react-redux';import axios from'axios';import{useHistory}from\"react-router-dom\";import{createProduct}from\"../actions/productActions\";import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NewProductScreen=function NewProductScreen(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var submitHandler=function submitHandler(){var data={name:formData.name,price:formData.price,image:formData.image,countInStock:formData.countInStock,rating:formData.rating,category:formData.category,brand:formData.brand,description:formData.description};axios.post(\"http://localhost:5000/api/products/\",data).then(function(res){if(res.status==200){setFormData(data);alert('New Product Created');props.history.push(\"/productlist\");}else{alert('Product not created');}});};var handleChange=function handleChange(event){var name=event.target.name;var value=event.target.value;setFormData(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingUpload=_useState4[0],setLoadingUpload=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorUpload=_useState6[0],setErrorUpload=_useState6[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var uploadFileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,bodyFormData,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];bodyFormData=new FormData();bodyFormData.append('image',file);setLoadingUpload(true);_context.prev=4;_context.next=7;return axios.post('/api/uploads',bodyFormData,{headers:{'Content-Type':'multipart/form-data',Authorization:\"Sanju \".concat(userInfo.token)}});case 7:_yield$axios$post=_context.sent;data=_yield$axios$post.data;//setImage(data);\nsetFormData(function(values){return _objectSpread(_objectSpread({},values),{},{image:data});});setLoadingUpload(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);setErrorUpload(_context.t0.message);setLoadingUpload(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function uploadFileHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"New Product\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",placeholder:\"Enter name\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{id:\"price\",type:\"text\",placeholder:\"Enter price\",value:formData.price,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile\",children:\"Image File\"}),/*#__PURE__*/_jsx(\"input\",{id:\"imageFile\",type:\"file\",label:\"Choose Image\",onChange:uploadFileHandler})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{id:\"category\",type:\"text\",placeholder:\"Enter category\",value:formData.category,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{id:\"brand\",type:\"text\",placeholder:\"Enter brand\",value:formData.brand,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStock\",children:\"Count In Stock\"}),/*#__PURE__*/_jsx(\"input\",{id:\"countInStock\",type:\"text\",placeholder:\"Enter countInStock\",value:formData.countInStock,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rating\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"input\",{id:\"rating\",type:\"text\",placeholder:\"Enter rating\",value:formData.rating,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{id:\"description\",type:\"text\",placeholder:\"Enter description\",value:formData.description,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"primary\",type:\"submit\",children:\"Save\"})]})]})})});};export default NewProductScreen;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/sample/frontend/src/screens/NewProductScreen.js"],"names":["useState","useEffect","useDispatch","useSelector","axios","useHistory","createProduct","PRODUCT_CREATE_RESET","NewProductScreen","props","formData","setFormData","submitHandler","data","name","price","image","countInStock","rating","category","brand","description","post","then","res","status","alert","history","push","handleChange","event","target","value","values","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","state","userInfo","uploadFileHandler","e","file","files","bodyFormData","FormData","append","headers","Authorization","token","message"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { createProduct } from \"../actions/productActions\";\r\nimport {\r\n    PRODUCT_CREATE_RESET,\r\n  } from '../constants/productConstants';\r\n\r\nconst NewProductScreen = (props) => {\r\n    const [formData, setFormData] = useState({});\r\n  \r\n\r\n  \r\n    const submitHandler = () => {\r\n        const data = {\r\n            name: formData.name,\r\n            price: formData.price,\r\n            image: formData.image,\r\n            countInStock: formData.countInStock,\r\n            rating: formData.rating,\r\n            category: formData.category,\r\n            brand: formData.brand,\r\n            description: formData.description\r\n        }\r\n        axios.post(`http://localhost:5000/api/products/`, data).then(res => {\r\n          if(res.status == 200) {\r\n            setFormData(data);\r\n            alert('New Product Created')\r\n            props.history.push(`/productlist`) \r\n          } \r\n          else {\r\n              alert('Product not created')\r\n          }   \r\n            \r\n    \r\n}) \r\n    };\r\n\r\n\r\n    const handleChange = (event) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n        setFormData(values => ({ ...values, [name]: value }))\r\n    }\r\n\r\n    const [loadingUpload, setLoadingUpload] = useState(false);\r\n    const [errorUpload, setErrorUpload] = useState('');\r\n  \r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n    const uploadFileHandler = async (e) => {\r\n      const file = e.target.files[0];\r\n      const bodyFormData = new FormData();\r\n      bodyFormData.append('image', file);\r\n      setLoadingUpload(true);\r\n      try {\r\n        const { data } = await axios.post('/api/uploads', bodyFormData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            Authorization: `Sanju ${userInfo.token}`,\r\n          },\r\n        });\r\n        //setImage(data);\r\n        setFormData(values => ({ ...values, image: data }));\r\n        setLoadingUpload(false);\r\n      } catch (error) {\r\n        setErrorUpload(error.message);\r\n        setLoadingUpload(false);\r\n      }\r\n    };\r\n\r\n   \r\n    return (\r\n        <>\r\n            <div>\r\n              <form className=\"form\" onSubmit={submitHandler}>\r\n              <div>\r\n                <h1>New Product</h1>\r\n              </div>\r\n                            <div>\r\n                            <label htmlFor=\"name\">Name</label>\r\n                                <input\r\n                                    id=\"name\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter name\"\r\n                                    value={formData.name}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"price\">Price</label>\r\n                            <input\r\n                                    id=\"price\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter price\"\r\n                                    value={formData.price}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"imageFile\">Image File</label>\r\n                            <input\r\n                                    id=\"imageFile\"\r\n                                    type=\"file\"\r\n                                    label=\"Choose Image\"\r\n                                    onChange={uploadFileHandler}\r\n                                />  \r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"category\">Category</label>\r\n                            <input\r\n                                    id=\"category\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter category\"\r\n                                    value={formData.category}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"brand\">Brand</label>\r\n                            <input\r\n                                    id=\"brand\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter brand\"\r\n                                    value={formData.brand}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"countInStock\">Count In Stock</label>\r\n                            <input\r\n                                    id=\"countInStock\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter countInStock\"\r\n                                    value={formData.countInStock}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"rating\">Rating</label>\r\n                            <input\r\n                                    id=\"rating\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter rating\"\r\n                                    value={formData.rating}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"description\">Description</label>\r\n                            <input\r\n                                    id=\"description\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter description\"\r\n                                    value={formData.description}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label></label>\r\n                                <button className=\"primary\" type=\"submit\">\r\n                                    Save\r\n                                </button>\r\n                            </div>\r\n                        </form>                           \r\n                   \r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NewProductScreen;"]},"metadata":{},"sourceType":"module"}