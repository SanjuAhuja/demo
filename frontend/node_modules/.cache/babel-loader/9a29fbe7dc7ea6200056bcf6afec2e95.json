{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\yashhealth\\\\frontend\\\\src\\\\screens\\\\NewProductScreen.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport { createProduct } from \"../actions/productActions\";\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NewProductScreen = props => {\n  _s();\n\n  const [formData, setFormData] = useState({});\n  const dispatch = useDispatch();\n  const productCreate = useSelector(state => state.productCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    product: createdProduct\n  } = productCreate;\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({\n        type: PRODUCT_CREATE_RESET\n      });\n      props.history.push(`/product/${createdProduct._id}/edit`);\n    }\n  }, [createdProduct, dispatch]);\n\n  const submitHandler = () => {\n    const data = {\n      name: formData.name,\n      price: formData.price,\n      image: formData.image,\n      countInStock: formData.countInStock,\n      rating: formData.rating,\n      category: formData.category,\n      brand: formData.brand,\n      description: formData.description\n    };\n    axios.post(`http://localhost:5000/api/products/`, data).then(res => {\n      alert('New Product Created');\n      props.history.push(`/productlist`);\n    });\n  };\n\n  const handleChange = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setFormData(values => ({ ...values,\n      [name]: value\n    }));\n  };\n\n  const [loadingUpload, setLoadingUpload] = useState(false);\n  const [errorUpload, setErrorUpload] = useState('');\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n\n  const uploadFileHandler = async e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    setLoadingUpload(true);\n\n    try {\n      const {\n        data\n      } = await axios.post('/api/uploads', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Sanju ${userInfo.token}`\n        }\n      }); //setImage(data);\n\n      setFormData(values => ({ ...values,\n        image: data\n      }));\n      setLoadingUpload(false);\n    } catch (error) {\n      setErrorUpload(error.message);\n      setLoadingUpload(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"New Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"name\",\n            type: \"text\",\n            placeholder: \"Enter name\",\n            value: formData.name,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"price\",\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"price\",\n            type: \"text\",\n            placeholder: \"Enter price\",\n            value: formData.price,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"imageFile\",\n            children: \"Image File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"imageFile\",\n            type: \"file\",\n            label: \"Choose Image\",\n            onChange: uploadFileHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\",\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"category\",\n            type: \"text\",\n            placeholder: \"Enter category\",\n            value: formData.category,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"brand\",\n            children: \"Brand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"brand\",\n            type: \"text\",\n            placeholder: \"Enter brand\",\n            value: formData.brand,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"countInStock\",\n            children: \"Count In Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"countInStock\",\n            type: \"text\",\n            placeholder: \"Enter countInStock\",\n            value: formData.countInStock,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"rating\",\n            children: \"Rating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"rating\",\n            type: \"text\",\n            placeholder: \"Enter rating\",\n            value: formData.rating,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"description\",\n            type: \"text\",\n            placeholder: \"Enter description\",\n            value: formData.description,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary\",\n            type: \"submit\",\n            onClick: submitHandler,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(NewProductScreen, \"MzOKUnEH3+JairsDdeBuGHsDbOE=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = NewProductScreen;\nexport default NewProductScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewProductScreen\");","map":{"version":3,"sources":["C:/Users/DELL/Desktop/yashhealth/frontend/src/screens/NewProductScreen.js"],"names":["useState","useEffect","useDispatch","useSelector","axios","useHistory","createProduct","PRODUCT_CREATE_RESET","NewProductScreen","props","formData","setFormData","dispatch","productCreate","state","loading","loadingCreate","error","errorCreate","success","successCreate","product","createdProduct","type","history","push","_id","submitHandler","data","name","price","image","countInStock","rating","category","brand","description","post","then","res","alert","handleChange","event","target","value","values","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","e","file","files","bodyFormData","FormData","append","headers","Authorization","token","message"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { createProduct } from \"../actions/productActions\";\r\nimport {\r\n    PRODUCT_CREATE_RESET,\r\n  } from '../constants/productConstants';\r\n\r\nconst NewProductScreen = (props) => {\r\n    const [formData, setFormData] = useState({});\r\n    const dispatch = useDispatch();\r\n    const productCreate = useSelector((state) => state.productCreate);\r\n    const {\r\n      loading: loadingCreate,\r\n      error: errorCreate,\r\n      success: successCreate,\r\n      product: createdProduct,\r\n    } = productCreate;\r\n  \r\n\r\n    useEffect(() => {\r\n        if (successCreate) {\r\n          dispatch({ type: PRODUCT_CREATE_RESET });\r\n          props.history.push(`/product/${createdProduct._id}/edit`);\r\n        }\r\n        \r\n      }, [\r\n        createdProduct,\r\n        dispatch,\r\n      ]);\r\n     \r\n  \r\n    const submitHandler = () => {\r\n        const data = {\r\n            name: formData.name,\r\n            price: formData.price,\r\n            image: formData.image,\r\n            countInStock: formData.countInStock,\r\n            rating: formData.rating,\r\n            category: formData.category,\r\n            brand: formData.brand,\r\n            description: formData.description\r\n        }\r\n        axios.post(`http://localhost:5000/api/products/`, data).then(res => {\r\n              \r\n            alert('New Product Created')\r\n            props.history.push(`/productlist`)  \r\n    \r\n}) \r\n    };\r\n\r\n\r\n    const handleChange = (event) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n        setFormData(values => ({ ...values, [name]: value }))\r\n    }\r\n\r\n    const [loadingUpload, setLoadingUpload] = useState(false);\r\n    const [errorUpload, setErrorUpload] = useState('');\r\n  \r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n    const uploadFileHandler = async (e) => {\r\n      const file = e.target.files[0];\r\n      const bodyFormData = new FormData();\r\n      bodyFormData.append('image', file);\r\n      setLoadingUpload(true);\r\n      try {\r\n        const { data } = await axios.post('/api/uploads', bodyFormData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            Authorization: `Sanju ${userInfo.token}`,\r\n          },\r\n        });\r\n        //setImage(data);\r\n        setFormData(values => ({ ...values, image: data }));\r\n        setLoadingUpload(false);\r\n      } catch (error) {\r\n        setErrorUpload(error.message);\r\n        setLoadingUpload(false);\r\n      }\r\n    };\r\n\r\n   \r\n    return (\r\n        <>\r\n            <div>\r\n              <form className=\"form\">\r\n              <div>\r\n                <h1>New Product</h1>\r\n              </div>\r\n                            <div>\r\n                            <label htmlFor=\"name\">Name</label>\r\n                                <input\r\n                                    id=\"name\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter name\"\r\n                                    value={formData.name}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"price\">Price</label>\r\n                            <input\r\n                                    id=\"price\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter price\"\r\n                                    value={formData.price}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"imageFile\">Image File</label>\r\n                            <input\r\n                                    id=\"imageFile\"\r\n                                    type=\"file\"\r\n                                    label=\"Choose Image\"\r\n                                    onChange={uploadFileHandler}\r\n                                />  \r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"category\">Category</label>\r\n                            <input\r\n                                    id=\"category\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter category\"\r\n                                    value={formData.category}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"brand\">Brand</label>\r\n                            <input\r\n                                    id=\"brand\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter brand\"\r\n                                    value={formData.brand}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"countInStock\">Count In Stock</label>\r\n                            <input\r\n                                    id=\"countInStock\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter countInStock\"\r\n                                    value={formData.countInStock}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"rating\">Rating</label>\r\n                            <input\r\n                                    id=\"rating\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter rating\"\r\n                                    value={formData.rating}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                            <label htmlFor=\"description\">Description</label>\r\n                            <input\r\n                                    id=\"description\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter description\"\r\n                                    value={formData.description}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label></label>\r\n                                <button className=\"primary\" type=\"submit\" onClick={submitHandler}>\r\n                                    Save\r\n                                </button>\r\n                            </div>\r\n                        </form>                           \r\n                   \r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NewProductScreen;"]},"metadata":{},"sourceType":"module"}